"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2668],{32668:function(o,r,e){let l;e.d(r,{O:function(){return W}});var t=e(85893),i=e(67294),n=e(62097),a=e(11163),c=e(9473),s=e(55832),d=e(99494),p=e(96080),m=e(92993);let u=new Map,y=["1","3","15","30","60","120","240","360","720","1D","3D","1W","1M"],g={1:"1m",3:"3m",5:"5m",15:"15m",30:"30m",60:"1h",120:"2h",240:"4h",360:"6h",480:"8h",720:"12h",D:"1d","1D":"1d","3D":"3d",W:"1w","1W":"1w",M:"1M","1M":"1M"},h={1:"120",3:"120",5:"120",15:"D",30:"3D",60:"3D",120:"3D",240:"3D",360:"W",480:"W",720:"W",D:"3M","1D":"3M","3D":"3M",W:"3M","1W":"3M",M:"3M","1M":"3M"},b={...h,D:"2W","1D":"2W","3D":"M"},turnInsideOutObject=o=>{let r={};for(let e in o){let l=o[e];r[l]=e}return r},getTradingViewIntervals=()=>turnInsideOutObject(g),getTimezone=()=>Intl.DateTimeFormat().resolvedOptions().timeZone||"Asia/Dubai";let TradingDataFeed=class TradingDataFeed{onReady(o){let r={supports_marks:!1,supports_timescale_marks:!1,supports_time:!1,exchanges:[],symbols_types:[],supported_resolutions:this.resolutions};setTimeout(function(){o(r)},0)}searchSymbols(){}resolveSymbol(o,r,e){let l={...this.symbolData,name:o,full_name:o};this.endTime=void 0,l?setTimeout(function(){r(l)},0):setTimeout(function(){e("No data provided for symbol "+o)},0)}getBarDataFromResponse(o,r,e,l){if(0===o.length)return r([],{noData:!0});let t=o.map(o=>({time:Number(o[0]),open:Number(o[1]),close:Number(o[4]),high:Number(o[2]),low:Number(o[3])}));this.endTime=t[0].time-1,0===t.length?r([],{noData:!0}):(l.firstDataRequest&&u.set(e,{...t[t.length-1]}),r(t))}getBars(o,r,e,l,t){(r!==this.resolution||e.firstDataRequest)&&(this.endTime=void 0),this.resolution=r,this.symbolName=o.name,(0,p.W$)(o.name,g[r],this.isFutures,this.endTime).then(r=>{let{data:t}=r;this.getBarDataFromResponse(t,l,o.name,e)}).catch(o=>{(0,m.M)(o,"klines getBars"),window.location.reload(),t(o)})}subscribeBars(o,r,e,l,t){var i;u.size&&(null===(i=this.subscribeOnStream)||void 0===i||i.call(this,o.name,g[r],e,l,t,u.get(o.name)))}unsubscribeBars(o){var r;null===(r=this.unsubscribeFromStream)||void 0===r||r.call(this,o)}setStreamSubscriptions(o,r){this.subscribeOnStream=o,this.unsubscribeFromStream=r}constructor(o,r,e){this.isFutures=!1;let{pair:l,pricescale:t,resolutions:i}=o;this.resolutions=i||y,this.symbolData={name:l,full_name:l,description:"",type:"crypto",session:"24x7",exchange:"",listed_exchange:"",timezone:getTimezone(),format:"price",pricescale:t,minmov:1,has_intraday:!0,has_daily:!0,has_weekly_and_monthly:!0,intraday_multipliers:this.resolutions,daily_multipliers:["1","3"],data_status:"streaming",visible_plots_set:"ohlc"},this.symbolName=l,this.resolution=void 0,this.endTime=void 0,this.isFutures=r;let{subscribeOnStream:n,unsubscribeFromStream:a}=e;this.subscribeOnStream=n,this.unsubscribeFromStream=a}};var v=e(7756),w=e(40016);let hardPageRefresh=()=>window.location.reload(),useIdleTimer=function(o){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18e5,[e,l]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let e;let resetIdleTimer=()=>{e&&clearTimeout(e),e=setTimeout(()=>{o?o():hardPageRefresh(),l(0)},r)},handleUserActivity=()=>{l(0),resetIdleTimer()};return resetIdleTimer(),window.addEventListener("mousemove",handleUserActivity),window.addEventListener("keydown",handleUserActivity),window.addEventListener("scroll",handleUserActivity),()=>{e&&clearTimeout(e),window.removeEventListener("mousemove",handleUserActivity),window.removeEventListener("keydown",handleUserActivity),window.removeEventListener("scroll",handleUserActivity)}},[r,o]),{idleTime:e}};var k=e(82729),f=e(81719),C=e(70917),x=e(81321);function _templateObject(){let o=(0,k._)(["\n    width: 100%;\n    height: 100vh;\n    position: relative;\n    // make trading logo non clickable\n    ::after {\n      position: absolute;\n      bottom: 33px;\n      left: 62px;\n      width: 40px;\n      height: 40px;\n      background: transparent;\n      content: '';\n    }\n    "," {\n      ::after {\n        width: 0;\n        height: 0;\n      }\n    }\n  "]);return _templateObject=function(){return o},o}function _templateObject1(){let o=(0,k._)(["\n    width: 100%;\n    max-height: 320px;\n\n    "," {\n      height: ",";\n      max-height: unset;\n      min-height: 280px;\n    }\n  "]);return _templateObject1=function(){return o},o}let _=(0,f.ZP)("div")(o=>{let{theme:r}=o;return(0,C.iv)(_templateObject(),r.breakpoints.up("md"))}),T=(0,f.ZP)("div")(o=>{let{theme:r,isFullSize:e}=o;return(0,C.iv)(_templateObject1(),r.breakpoints.up("lg"),e?"90vh":x.Mo)}),B=[],onResolutionClick=o=>{window.tvWidget.activeChart().setResolution(o)},createResolution=(o,r,e,l,t)=>{let i=window.tvWidget.createButton();i.addEventListener("click",function(){l(),onResolutionClick(o)}),i.setAttribute("title",e),i.setAttribute("resolution",o),o===t&&i.classList.add("resolutionBtnActive"),i.classList.add("resolutionBtn"),i.textContent=r,B.push(i)},updateActiveResolutions=o=>{window.tvWidget.onChartReady(()=>{window.tvWidget.activeChart().onIntervalChanged().subscribe(null,r=>{o&&console.log("interval=".concat(r)),B.forEach(o=>{o.getAttribute("resolution")===r?o.classList.add("resolutionBtnActive"):o.classList.remove("resolutionBtnActive")})})})},S='<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="m3.64271 5.69526 4.3605 4.36044 4.36049-4.36044c.2603-.26035.6824-.26035.9428 0 .2603.26035.2603.68246 0 .94281l-4.83189 4.83183c-.12506.1251-.2946.1953-.4714.1953s-.3464-.0702-.4714-.1953l-4.83191-4.83183c-.03255-.03254-.06102-.06762-.08543-.10458-.17085-.25877-.14238-.61042.08543-.83823.26035-.26035.68246-.26035.94281 0z" fill="#b2b5be"/></svg>',O=["use_localstorage_for_settings","header_symbol_search","header_interval_dialog_button","header_compare","header_saveload","symbol_info","border_around_the_chart","scales_context_menu","go_to_date","chart_property_page_style","header_screenshot","timeframes_toolbar"],overrides=o=>({"indicator_name.plot_name.color":"red","paneProperties.backgroundType":"solid","paneProperties.background":o.colors.card,"mainSeriesProperties.candleStyle.upColor":o.colors.primary,"mainSeriesProperties.candleStyle.downColor":o.colors.shortCta,"mainSeriesProperties.candleStyle.drawBorder":!1,"mainSeriesProperties.lineStyle.color":o.colors.primary,"mainSeriesProperties.areaStyle.linecolor":o.colors.primary,"symbolWatermarkProperties.visibility":!1,"paneProperties.vertGridProperties.color":"transparent","paneProperties.horzGridProperties.color":"transparent","scalesProperties.textColor":o.colors.textSecondary,"scalesProperties.axisHighlightColor":"#DCFBEE","scalesProperties.axisLineToolLabelBackgroundColorActive":o.colors.primary,"scalesProperties.axisLineToolLabelBackgroundColorCommon":o.colors.primary,"linetoolicon.color":o.colors.primary,"linetoolemoji.color":o.colors.primary,"linetoolbezierquadro.linecolor":o.colors.primary,"linetoolbezierquadro.backgroundColor":o.colors.primaryOpacity,"linetoolbeziercubic.linecolor":o.colors.primary,"linetoolbeziercubic.backgroundColor":o.colors.primaryOpacity,"linetooltrendline.linecolor":o.colors.primary,"linetooltrendline.textcolor":o.colors.primary,"linetoolinfoline.linecolor":o.colors.primary,"linetoolinfoline.textcolor":o.colors.primary,"linetooltimecycles.linecolor":o.colors.primary,"linetooltimecycles.backgroundColor":o.colors.primaryOpacity,"linetoolsineline.linecolor":o.colors.primary,"linetooltrendangle.linecolor":o.colors.primary,"linetooltrendangle.textcolor":o.colors.primary,"linetooldisjointangle.linecolor":o.colors.primary,"linetooldisjointangle.textcolor":o.colors.primary,"linetooldisjointangle.backgroundColor":o.colors.primaryOpacity,"linetoolflatbottom.linecolor":o.colors.primary,"linetoolflatbottom.textcolor":o.colors.primary,"linetoolflatbottom.backgroundColor":o.colors.primaryOpacity,"linetoolfibspiral.linecolor":o.colors.primary,"linetooldaterange.linecolor":o.colors.primary,"linetooldaterange.textcolor":o.colors.primaryText,"linetooldaterange.labelBackgroundColor":o.colors.primary,"linetooldaterange.backgroundColor":o.colors.primaryOpacity,"linetooldaterange.borderColor":o.colors.primary,"linetoolpricerange.linecolor":o.colors.primary,"linetoolpricerange.textcolor":o.colors.primaryText,"linetoolpricerange.labelBackgroundColor":o.colors.primaryOpacity,"linetoolpricerange.borderColor":o.colors.primary,"linetoolpricerange.backgroundColor":o.colors.primaryOpacity,"linetooldateandpricerange.linecolor":o.colors.primary,"linetooldateandpricerange.textcolor":o.colors.primaryText,"linetooldateandpricerange.labelBackgroundColor":o.colors.primaryOpacity,"linetooldateandpricerange.backgroundColor":o.colors.primaryOpacity,"linetooldateandpricerange.borderColor":o.colors.primary,"linetoolriskrewardshort.linecolor":o.colors.primary,"linetoolriskrewardshort.textcolor":o.colors.primaryText,"linetoolriskrewardshort.labelBackgroundColor":o.colors.primary,"linetoolriskrewardshort.stopBackground":o.colors.tradingNegativeBackground,"linetoolriskrewardshort.profitBackground":o.colors.tradingPositiveBackground,"linetoolriskrewardshort.borderColor":o.colors.primary,"linetoolriskrewardlong.linecolor":o.colors.primary,"linetoolriskrewardlong.textcolor":o.colors.primaryText,"linetoolriskrewardlong.labelBackgroundColor":o.colors.primary,"linetoolriskrewardlong.stopBackground":o.colors.tradingNegativeBackground,"linetoolriskrewardlong.profitBackground":o.colors.tradingPositiveBackground,"linetoolriskrewardlong.borderColor":o.colors.primary,"linetoolarrow.linecolor":o.colors.primary,"linetoolarrow.textcolor":o.colors.primaryText,"linetoolray.linecolor":o.colors.primary,"linetoolray.textcolor":o.colors.primaryText,"linetoolextended.linecolor":o.colors.primary,"linetoolextended.textcolor":o.colors.primaryText,"linetoolhorzline.linecolor":o.colors.primary,"linetoolhorzline.textcolor":o.colors.primaryText,"linetoolhorzray.linecolor":o.colors.primary,"linetoolhorzray.textcolor":o.colors.primaryText,"linetoolvertline.linecolor":o.colors.primary,"linetoolvertline.textcolor":o.colors.primaryText,"linetoolcrossline.linecolor":o.colors.primary,"linetoolcirclelines.trendline.color":o.colors.primary,"linetoolcirclelines.linecolor":o.colors.primary,"linetoolfibtimezone.baselinecolor":o.colors.primary,"linetooltext.color":o.colors.primary,"linetooltext.backgroundColor":o.colors.primaryOpacity,"linetooltext.borderColor":o.colors.primary,"linetooltextabsolute.color":o.colors.primary,"linetooltextabsolute.backgroundColor":o.colors.primaryOpacity,"linetooltextabsolute.borderColor":o.colors.primary,"linetoolballoon.color":o.colors.primary,"linetoolballoon.backgroundColor":o.colors.primaryOpacity,"linetoolballoon.borderColor":o.colors.primaryOpacity,"linetoolcomment.color":o.colors.primaryText,"linetoolcomment.backgroundColor":o.colors.primaryOpacity,"linetoolcomment.borderColor":o.colors.primaryOpacity,"linetoolbrush.linecolor":o.colors.primary,"linetoolbrush.backgroundColor":o.colors.primary,"linetoolhighlighter.linecolor":o.colors.primary,"linetoolpolyline.linecolor":o.colors.primary,"linetoolpolyline.backgroundColor":o.colors.primaryOpacity,"linetoolpath.lineColor":o.colors.primary,"linetoolarrowmarkleft.color":o.colors.primary,"linetoolarrowmarkleft.arrowColor":o.colors.primary,"linetoolarrowmarkup.color":o.colors.primary,"linetoolarrowmarkup.arrowColor":o.colors.primary,"linetoolarrowmarkright.color":o.colors.primary,"linetoolarrowmarkright.arrowColor":o.colors.primary,"linetoolarrowmarkdown.color":o.colors.primary,"linetoolarrowmarkdown.arrowColor":o.colors.primary,"linetoolflagmark.flagColor":o.colors.primary,"linetoolnote.markerColor":o.colors.primary,"linetoolnote.backgroundColor":o.colors.primaryOpacity,"linetoolnote.borderColor":o.colors.primary,"linetoolnoteabsolute.markerColor":o.colors.primary,"linetoolnoteabsolute.backgroundColor":o.colors.primaryOpacity,"linetoolnoteabsolute.borderColor":o.colors.primary,"linetoolpricelabel.color":o.colors.primaryText,"linetoolpricelabel.backgroundColor":o.colors.primaryOpacity,"linetoolpricelabel.borderColor":o.colors.primary,"linetoolpricenote.textColor":o.colors.primaryText,"linetoolpricenote.lineColor":o.colors.primaryOpacity,"linetoolpricenote.priceLabelBackgroundColor":o.colors.primary,"linetoolpricenote.priceLabelBorderColor":o.colors.primary,"linetoolpricenote.priceLabelTextColor":o.colors.primaryText,"linetoolarrowmarker.backgroundColor":o.colors.primary,"linetoolarrowmarker.textColor":o.colors.primary,"linetoolrectangle.color":o.colors.primaryText,"linetoolrectangle.backgroundColor":o.colors.primaryOpacity,"linetoolrectangle.textColor":o.colors.primaryText,"linetoolrotatedrectangle.color":o.colors.primaryText,"linetoolrotatedrectangle.backgroundColor":o.colors.primaryOpacity,"linetoolellipse.color":o.colors.primaryText,"linetoolellipse.backgroundColor":o.colors.primaryOpacity,"linetoolarc.color":o.colors.primaryText,"linetoolarc.backgroundColor":o.colors.primaryOpacity,"linetoolprediction.linecolor":o.colors.primary,"linetoolprediction.sourceBackColor":o.colors.primary,"linetoolprediction.sourceTextColor":o.colors.primaryText,"linetoolprediction.sourceStrokeColor":o.colors.primary,"linetoolprediction.targetStrokeColor":o.colors.primary,"linetoolprediction.targetBackColor":o.colors.primary,"linetoolprediction.targetTextColor":o.colors.primaryText,"linetoolprediction.successBackground":o.colors.tradingPositiveBackground,"linetoolprediction.successTextColor":o.colors.primaryText,"linetoolprediction.failureBackground":o.colors.tradingNegativeBackground,"linetoolprediction.failureTextColor":o.colors.primaryText,"linetoolprediction.intermediateBackColor":"rgba( 234, 210, 137, 1)","linetoolprediction.intermediateTextColor":"rgba( 109, 77, 34, 1)","linetoolprediction.centersColor":"rgba( 32, 32, 32, 1)","linetooltriangle.color":o.colors.primary,"linetooltriangle.backgroundColor":o.colors.primaryOpacity,"linetoolcallout.color":o.colors.primaryText,"linetoolcallout.backgroundColor":o.colors.primaryOpacity,"linetoolcallout.bordercolor":o.colors.primary,"linetoolparallelchannel.linecolor":o.colors.primary,"linetoolparallelchannel.midlinecolor":o.colors.primary,"linetoolparallelchannel.backgroundColor":o.colors.primaryOpacity,"linetoolelliottimpulse.color":o.colors.primary,"linetoolelliotttriangle.color":o.colors.primary,"linetoolelliotttriplecombo.color":o.colors.primary,"linetoolelliottcorrection.color":o.colors.primary,"linetoolelliottdoublecombo.color":o.colors.primary,"linetoolbarspattern.color":o.colors.primary,"linetoolghostfeed.candleStyle.upColor":o.colors.tradingPositiveBackground,"linetoolghostfeed.candleStyle.downColor":o.colors.tradingNegativeBackground,"linetoolghostfeed.candleStyle.borderUpColor":o.colors.tradingPositiveBackground,"linetoolghostfeed.candleStyle.borderColor":o.colors.primary,"linetoolghostfeed.candleStyle.borderDownColor":o.colors.tradingNegativeBackground,"linetoolghostfeed.candleStyle.wickColor":o.colors.primary,"linetoolpitchfork.median.color":o.colors.tradingNegativeBackground,"linetoolpitchfan.median.color":o.colors.primaryText,"linetoolgannsquare.color":o.colors.primary,"linetoolfibspeedresistancefan.grid.color":o.colors.primaryOpacity,"linetoolfibretracement.trendline.color":o.colors.primary,"linetoolprojection.color1":"rgba(41, 98, 255, 0.2)","linetoolprojection.color2":o.colors.tradingPositiveBackground,"linetoolprojection.trendline.color":o.colors.primary,"linetool5pointspattern.color":o.colors.primary,"linetool5pointspattern.textcolor":o.colors.primaryText,"linetool5pointspattern.backgroundColor":o.colors.primary,"linetoolcypherpattern.color":o.colors.primary,"linetoolcypherpattern.textcolor":o.colors.primaryText,"linetoolcypherpattern.backgroundColor":o.colors.primary,"linetooltrianglepattern.color":o.colors.primary,"linetooltrianglepattern.textcolor":o.colors.primaryText,"linetooltrianglepattern.backgroundColor":o.colors.primary,"linetoolabcd.color":o.colors.primary,"linetoolabcd.textcolor":o.colors.primaryText,"linetoolthreedrivers.color":o.colors.primary,"linetoolthreedrivers.textcolor":o.colors.primaryText,"linetoolthreedrivers.backgroundColor":o.colors.primary,"linetoolheadandshoulders.color":o.colors.primary,"linetoolheadandshoulders.textcolor":o.colors.primaryText,"linetoolheadandshoulders.backgroundColor":o.colors.primary,"linetoolfibwedge.trendline.color":o.colors.primary,"linetoolfibcircles.trendline.color":o.colors.primary,"linetoolfibspeedresistancearcs.trendline.color":o.colors.primary,"linetooltrendbasedfibextension.trendline.color":o.colors.primary,"linetooltrendbasedfibtime.trendline.color":o.colors.primary,"linetoolinsidepitchfork.median.color":o.colors.primary,"linetoolschiffpitchfork2.median.color":o.colors.primary,"linetoolregressiontrend.styles.upLine.color":o.colors.tradingPositiveBackground,"linetoolregressiontrend.styles.downLine.color":o.colors.tradingNegativeBackground,"linetoolregressiontrend.styles.baseLine.color":o.colors.primaryText});var D=e(52946);let W=(0,i.memo)((o=>{let ResolutionsWrapper=(r,e)=>{let{tradeData:l,isFullSize:n,queryInterval:a,platform:c}=r,[s,d]=(0,i.useState)(),setProps=(o,r)=>{"app"===c&&console.log("interval=".concat(r)),d({resolutions:o,defaultInterval:r})};return(0,i.useEffect)(()=>{if(l.pair){if(l.isFutures)return setProps(y,a||"1D");d({resolutions:[],defaultInterval:null}),(0,D._h)(l.pair).then(o=>{let{data:r}=o,e=getTradingViewIntervals(),l=[...(null==r?void 0:r.minutes)||[],...(null==r?void 0:r.hours)||[],...(null==r?void 0:r.days)||[]],t=l.map(o=>e[o]).filter(o=>null==o?void 0:o.length),i=(null==t?void 0:t.length)>0?t:y,n=a||e[r.defaultIntervalType]||"1D";setProps(i,n)}).catch(()=>{setProps(y,"1D")})}},[l,a]),(null==s?void 0:s.defaultInterval)?(0,t.jsx)(o,{...r,ref:e,defaultInterval:s.defaultInterval,resolutions:s.resolutions}):(0,t.jsx)(T,{isFullSize:n})};return ResolutionsWrapper.displayName="ResolutionsWrapper",(0,i.forwardRef)(ResolutionsWrapper)})((0,i.forwardRef)(function(o,r){var e,p,m,u;let{tradeData:y,className:k,themeStyle:f,debug:C,customButtonType:x,platform:T,resolutions:B,defaultInterval:D,isMobile:W}=o;useIdleTimer();let{t:P}=(0,s.$G)(),I=(0,n.Z)(),{locale:R,query:E}=(0,a.useRouter)(),F=(0,i.useContext)(w.J),N=(0,i.useMemo)(()=>y.isFutures?y.pair.split("-").join(""):y.pair,[y.isFutures,y.pair]),log=o=>{"app"===T&&console.log(o)};(0,i.useEffect)(()=>{var o;(null==F?void 0:null===(o=F.futures)||void 0===o?void 0:o.socket)&&"app"===T&&y.isFutures&&(null==F||F.futures.subscribe(["btcusdt@markPrice@1s"],!0))},[null==F?void 0:null===(e=F.futures)||void 0===e?void 0:e.socket,T,y.isFutures]);let L=y.isFutures?null==F?void 0:F.futures:null==F?void 0:F.spot,{chartSubscriptions:A}=L||{},{subscribeOnStream:M,unsubscribeFromStream:j,unsubscribeAllStreams:z,onSelectResolution:U,onSelectSymbol:q}=A||{},V="dark"===I.themeStyle,[G,Z]=(0,i.useState)(!0),[$,H]=(0,i.useState)(),[J,Y]=(0,i.useState)(),K=(0,v.vl)(),Q=(0,c.I0)(),getChartOptions=(o,r)=>{x&&O.push("header_fullscreen_button");let e="app"===T||W,l=e?["legend_widget","header_undo_redo","header_chart_type"]:[];e&&(null==E?void 0:E.orientation)!=="landscape"&&(l.push("header_settings"),l.push("header_indicators")),"app"===T&&l.push("header_resolutions");let t=["disable_resolution_rebuild"];return e&&t.push("hide_left_toolbar_by_default"),{autosize:!0,container:"chart_container",custom_css_url:"".concat("https://static.m2.com/resource","/static/styles/tradingview/").concat(I.themeStyle,".css"),symbol:N,interval:r,datafeed:o,debug:C,disabled_features:[...O,...l],enabled_features:t,timeframe:(e?b[r]:h[r])||"3M",timezone:getTimezone(),library_path:"".concat("https://static.m2.com/resource","/static/js/charting_library/charting_library/"),loading_screen:{backgroundColor:I.colors.card,foregroundColor:I.colors.primary},locale:(0,d.Y7)(R),overrides:overrides(I),studies_overrides:{"volume.volume.color.1":I.colors.tradingPositiveBackground,"volume.volume.color.0":I.colors.tradingNegativeBackground},theme:V?"Dark":"Light",toolbar_bg:V?"#15151A":"#FFF"}},createButtonsForMobileApp=()=>{let o=window.tvWidget.createButton({align:"right"});o.addEventListener("click",()=>log("@@@ ".concat(x,": custom btn click"))),o.classList.add("open"===x?"openBtn":"closeBtn")},resetDropdownValue=()=>{H("")},getDropdownTitle=o=>{switch(o){case"1":return"1 ".concat(P("common.time.minute"));case"3":case"5":case"30":return P("common.time.minutes",{minutes:o});case"120":case"360":case"720":return P("common.time.hours",{hours:Number(o)/60});case"3D":return P("common.time.days",{days:3});case"1W":return"1 ".concat(P("common.time.week"));case"1M":return"1 ".concat(P("common.time.month"));default:return g[o]}},selectActiveInterval=o=>{let r=g[o];H(r)},createIntervalDropdown=o=>{window.tvWidget.createDropdown({title:$,items:o.map(o=>({title:getDropdownTitle(o),onSelect:()=>{selectActiveInterval(o),window.tvWidget.activeChart().setResolution(o)}})),icon:S}).then(Y)},applyIndicators=()=>{K&&window.tvWidget.activeChart().applyStudyTemplate(K)},subscribeIndicatorChange=()=>{window.tvWidget.subscribe("study_event",()=>{let o=window.tvWidget.activeChart().createStudyTemplate({saveSymbol:!0,saveInterval:!0});Q.trade.setChartStudies(o)})},X={15:{title:"15m",tooltip:P("common.time.minutes",{minutes:15})},60:{title:"1h",tooltip:"1 ".concat(P("common.time.hour"))},240:{title:"4h",tooltip:P("common.time.hours",{hours:4})},"1D":{title:"1d",tooltip:"1 ".concat(P("common.time.day"))}},initOnReady=async(o,r,e)=>{let l=getChartOptions(o,e);window.tvWidget=new window.TradingView.widget(l),window.tvWidget.headerReady().then(function(){if("app"===T){let o=[],l=!0;r.forEach(r=>{let t=X[r];t?(createResolution(r,t.title,t.tooltip,resetDropdownValue,e),e===r&&(l=!1)):o.push(r)}),l&&selectActiveInterval(e),createIntervalDropdown(o),x&&createButtonsForMobileApp()}}),window.tvWidget.onChartReady(async()=>{applyIndicators(),subscribeIndicatorChange(),await updateActiveResolutions("app"===T),log("chart is ready"),Z(!1)})};return(0,i.useEffect)(()=>{D&&(null==B?void 0:B.length)&&f&&""!==y.pair&&initOnReady(l=new TradingDataFeed({pair:N,pricescale:y.priceScale,resolutions:B},y.isFutures,{subscribeOnStream:M,unsubscribeFromStream:j}),B,D)},[y.isFutures,f,W,N]),(0,i.useEffect)(()=>{null==l||l.setStreamSubscriptions(M,j)},[M,j]),(0,i.useEffect)(()=>{J&&J.applyOptions({title:$,icon:$?void 0:S})},[$,J]),(0,i.useEffect)(()=>{var o,r;if(!L||G)return;let e=null==L?void 0:null===(o=L.socket)||void 0===o?void 0:o.readyState,l=e===WebSocket.CONNECTING||e===WebSocket.OPEN;l&&(null===(r=window.tvWidget)||void 0===r||r.onChartReady(()=>{var o,r;null===(r=window)||void 0===r||null===(o=r.tvWidget)||void 0===o||o.activeChart().resetData()}))},[null==L?void 0:null===(p=L.socket)||void 0===p?void 0:p.readyState,G]),(0,i.useEffect)(()=>{var o;null===(o=window.tvWidget)||void 0===o||o.onChartReady(()=>{window.tvWidget.activeChart().setSymbol(N),null==q||q(N)})},[N,q,null==L?void 0:null===(m=L.socket)||void 0===m?void 0:m.readyState]),(0,i.useEffect)(()=>()=>{null==z||z()},[]),(0,i.useEffect)(()=>{var o;null===(o=window.tvWidget)||void 0===o||o.onChartReady(()=>{window.tvWidget.activeChart().onIntervalChanged().subscribe(null,o=>{null==U||U(g[o])})})},[U,null==L?void 0:null===(u=L.socket)||void 0===u?void 0:u.readyState]),(0,t.jsx)(_,{id:"chart_container",className:k,ref:r})})))}}]);